<!doctype html><html lang=zh dir=" ltr"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><title>1.3.49 | 《算法（第四版）》C# 题解</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.svg type=image/x-icon><link rel=stylesheet href=/book.min.97cfda4f5e3c9fa49a2bf8d401f4ddc0eec576c99cdcf6afbec19173200c37db.css integrity="sha256-l8/aT148n6SaK/jUAfTdwO7Fdsmc3PavvsGRcyAMN9s=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/zh.search.min.838a41f7cc6fa4229385e3ba7f129de2f831416da8cf8987f5b64949636d3b26.js integrity="sha256-g4pB98xvpCKTheO6fxKd4vgxQW2oz4mH9bZJSWNtOyY=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-71SCLB4WQT"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-71SCLB4WQT",{anonymize_ip:!1})}</script><script>window.katexOption={delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body,window.katexOption)></script></head><body dir=" ltr"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>《算法（第四版）》C# 题解</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/thanks/>特别感谢</a></li><li><a href=/1-1-1/>1.1.1</a></li><li><a href=/1-1-2/>1.1.2</a></li><li><a href=/1-1-3/>1.1.3</a></li><li><a href=/1-1-4/>1.1.4</a></li><li><a href=/1-1-5/>1.1.5</a></li><li><a href=/1-1-6/>1.1.6</a></li><li><a href=/1-1-7/>1.1.7</a></li><li><a href=/1-1-8/>1.1.8</a></li><li><a href=/1-1-9/>1.1.9</a></li><li><a href=/1-1-10/>1.1.10</a></li><li><a href=/1-1-11/>1.1.11</a></li><li><a href=/1-1-12/>1.1.12</a></li><li><a href=/1-1-13/>1.1.13</a></li><li><a href=/1-1-14/>1.1.14</a></li><li><a href=/1-1-15/>1.1.15</a></li><li><a href=/1-1-16/>1.1.16</a></li><li><a href=/1-1-17/>1.1.17</a></li><li><a href=/1-1-18/>1.1.18</a></li><li><a href=/1-1-19/>1.1.19</a></li><li><a href=/1-1-20/>1.1.20</a></li><li><a href=/1-1-21/>1.1.21</a></li><li><a href=/1-1-22/>1.1.22</a></li><li><a href=/1-1-23/>1.1.23</a></li><li><a href=/1-1-24/>1.1.24</a></li><li><a href=/1-1-25/>1.1.25</a></li><li><a href=/1-1-26/>1.1.26</a></li><li><a href=/1-1-27/>1.1.27</a></li><li><a href=/1-1-28/>1.1.28</a></li><li><a href=/1-1-29/>1.1.29</a></li><li><a href=/1-1-30/>1.1.30</a></li><li><a href=/1-1-31/>1.1.31</a></li><li><a href=/1-1-32/>1.1.32</a></li><li><a href=/1-1-33/>1.1.33</a></li><li><a href=/1-1-34/>1.1.34</a></li><li><a href=/1-1-35/>1.1.35</a></li><li><a href=/1-1-36/>1.1.36</a></li><li><a href=/1-1-37/>1.1.37</a></li><li><a href=/1-1-38/>1.1.38</a></li><li><a href=/1-1-39/>1.1.39</a></li><li><a href=/1-2-1/>1.2.1</a></li><li><a href=/1-2-2/>1.2.2</a></li><li><a href=/1-2-3/>1.2.3</a></li><li><a href=/1-2-4/>1.2.4</a></li><li><a href=/1-2-5/>1.2.5</a></li><li><a href=/1-2-6/>1.2.6</a></li><li><a href=/1-2-7/>1.2.7</a></li><li><a href=/1-2-8/>1.2.8</a></li><li><a href=/1-2-9/>1.2.9</a></li><li><a href=/1-2-10/>1.2.10</a></li><li><a href=/1-2-11/>1.2.11</a></li><li><a href=/1-2-12/>1.2.12</a></li><li><a href=/1-2-13/>1.2.13</a></li><li><a href=/1-2-14/>1.2.14</a></li><li><a href=/1-2-15/>1.2.15</a></li><li><a href=/1-2-16/>1.2.16</a></li><li><a href=/1-2-17/>1.2.17</a></li><li><a href=/1-2-18/>1.2.18</a></li><li><a href=/1-2-19/>1.2.19</a></li><li><a href=/1-3-1/>1.3.1</a></li><li><a href=/1-3-2/>1.3.2</a></li><li><a href=/1-3-3/>1.3.3</a></li><li><a href=/1-3-4/>1.3.4</a></li><li><a href=/1-3-5/>1.3.5</a></li><li><a href=/1-3-6/>1.3.6</a></li><li><a href=/1-3-7/>1.3.7</a></li><li><a href=/1-3-8/>1.3.8</a></li><li><a href=/1-3-9/>1.3.9</a></li><li><a href=/1-3-10/>1.3.10</a></li><li><a href=/1-3-11/>1.3.11</a></li><li><a href=/1-3-12/>1.3.12</a></li><li><a href=/1-3-13/>1.3.13</a></li><li><a href=/1-3-14/>1.3.14</a></li><li><a href=/1-3-15/>1.3.15</a></li><li><a href=/1-3-16/>1.3.16</a></li><li><a href=/1-3-17/>1.3.17</a></li><li><a href=/1-3-18/>1.3.18</a></li><li><a href=/1-3-19/>1.3.19</a></li><li><a href=/1-3-20/>1.3.20</a></li><li><a href=/1-3-21/>1.3.21</a></li><li><a href=/1-3-22/>1.3.22</a></li><li><a href=/1-3-23/>1.3.23</a></li><li><a href=/1-3-24/>1.3.24</a></li><li><a href=/1-3-25/>1.3.25</a></li><li><a href=/1-3-26/>1.3.26</a></li><li><a href=/1-3-27/>1.3.27</a></li><li><a href=/1-3-28/>1.3.28</a></li><li><a href=/1-3-29/>1.3.29</a></li><li><a href=/1-3-30/>1.3.30</a></li><li><a href=/1-3-31/>1.3.31</a></li><li><a href=/1-3-32/>1.3.32</a></li><li><a href=/1-3-33/>1.3.33</a></li><li><a href=/1-3-34/>1.3.34</a></li><li><a href=/1-3-35/>1.3.35</a></li><li><a href=/1-3-36/>1.3.36</a></li><li><a href=/1-3-37/>1.3.37</a></li><li><a href=/1-3-38/>1.3.38</a></li><li><a href=/1-3-39/>1.3.39</a></li><li><a href=/1-3-40/>1.3.40</a></li><li><a href=/1-3-41/>1.3.41</a></li><li><a href=/1-3-42/>1.3.42</a></li><li><a href=/1-3-43/>1.3.43</a></li><li><a href=/1-3-44/>1.3.44</a></li><li><a href=/1-3-45/>1.3.45</a></li><li><a href=/1-3-46/>1.3.46</a></li><li><a href=/1-3-47/>1.3.47</a></li><li><a href=/1-3-48/>1.3.48</a></li><li><a href=/1-3-49/ class=active>1.3.49</a></li><li><a href=/1-3-50/>1.3.50</a></li><li><a href=/1-4-1/>1.4.1</a></li><li><a href=/1-4-2/>1.4.2</a></li><li><a href=/1-4-3/>1.4.3</a></li><li><a href=/1-4-4/>1.4.4</a></li><li><a href=/1-4-5/>1.4.5</a></li><li><a href=/1-4-6/>1.4.6</a></li><li><a href=/1-4-7/>1.4.7</a></li><li><a href=/1-4-8/>1.4.8</a></li><li><a href=/1-4-9/>1.4.9</a></li><li><a href=/1-4-10/>1.4.10</a></li><li><a href=/1-4-11/>1.4.11</a></li><li><a href=/1-4-12/>1.4.12</a></li><li><a href=/1-4-13/>1.4.13</a></li><li><a href=/1-4-14/>1.4.14</a></li><li><a href=/1-4-15/>1.4.15</a></li><li><a href=/1-4-16/>1.4.16</a></li><li><a href=/1-4-17/>1.4.17</a></li><li><a href=/1-4-18/>1.4.18</a></li><li><a href=/1-4-19/>1.4.19</a></li><li><a href=/1-4-20/>1.4.20</a></li><li><a href=/1-4-21/>1.4.21</a></li><li><a href=/1-4-22/>1.4.22</a></li><li><a href=/1-4-23/>1.4.23</a></li><li><a href=/1-4-24/>1.4.24</a></li><li><a href=/1-4-25/>1.4.25</a></li><li><a href=/1-4-26/>1.4.26</a></li><li><a href=/1-4-27/>1.4.27</a></li><li><a href=/1-4-28/>1.4.28</a></li><li><a href=/1-4-29/>1.4.29</a></li><li><a href=/1-4-30/>1.4.30</a></li><li><a href=/1-4-31/>1.4.31</a></li><li><a href=/1-4-32/>1.4.32</a></li><li><a href=/1-4-33/>1.4.33</a></li><li><a href=/1-4-34/>1.4.34</a></li><li><a href=/1-4-35/>1.4.35</a></li><li><a href=/1-4-36/>1.4.36</a></li><li><a href=/1-4-37/>1.4.37</a></li><li><a href=/1-4-38/>1.4.38</a></li><li><a href=/1-4-39/>1.4.39</a></li><li><a href=/1-4-40/>1.4.40</a></li><li><a href=/1-4-41/>1.4.41</a></li><li><a href=/1-4-42/>1.4.42</a></li><li><a href=/1-4-43/>1.4.43</a></li><li><a href=/1-4-44/>1.4.44</a></li><li><a href=/1-4-45/>1.4.45</a></li><li><a href=/1-5-1/>1.5.1</a></li><li><a href=/1-5-2/>1.5.2</a></li><li><a href=/1-5-3/>1.5.3</a></li><li><a href=/1-5-4/>1.5.4</a></li><li><a href=/1-5-5/>1.5.5</a></li><li><a href=/1-5-6/>1.5.6</a></li><li><a href=/1-5-7/>1.5.7</a></li><li><a href=/1-5-8/>1.5.8</a></li><li><a href=/1-5-9/>1.5.9</a></li><li><a href=/1-5-10/>1.5.10</a></li><li><a href=/1-5-11/>1.5.11</a></li><li><a href=/1-5-12/>1.5.12</a></li><li><a href=/1-5-13/>1.5.13</a></li><li><a href=/1-5-14/>1.5.14</a></li><li><a href=/1-5-15/>1.5.15</a></li><li><a href=/1-5-16/>1.5.16</a></li><li><a href=/1-5-17/>1.5.17</a></li><li><a href=/1-5-18/>1.5.18</a></li><li><a href=/1-5-19/>1.5.19</a></li><li><a href=/1-5-20/>1.5.20</a></li><li><a href=/1-5-21/>1.5.21</a></li><li><a href=/1-5-22/>1.5.22</a></li><li><a href=/1-5-23/>1.5.23</a></li><li><a href=/1-5-24/>1.5.24</a></li><li><a href=/1-5-25/>1.5.25</a></li><li><a href=/1-5-26/>1.5.26</a></li><li><a href=/2-1-1/>2.1.1</a></li><li><a href=/2-1-2/>2.1.2</a></li><li><a href=/2-1-3/>2.1.3</a></li><li><a href=/2-1-4/>2.1.4</a></li><li><a href=/2-1-5/>2.1.5</a></li><li><a href=/2-1-6/>2.1.6</a></li><li><a href=/2-1-7/>2.1.7</a></li><li><a href=/2-1-8/>2.1.8</a></li><li><a href=/2-1-9/>2.1.9</a></li><li><a href=/2-1-10/>2.1.10</a></li><li><a href=/2-1-11/>2.1.11</a></li><li><a href=/2-1-12/>2.1.12</a></li><li><a href=/2-1-13/>2.1.13</a></li><li><a href=/2-1-14/>2.1.14</a></li><li><a href=/2-1-15/>2.1.15</a></li><li><a href=/2-1-16/>2.1.16</a></li><li><a href=/2-1-17/>2.1.17</a></li><li><a href=/2-1-18/>2.1.18</a></li><li><a href=/2-1-19/>2.1.19</a></li><li><a href=/2-1-20/>2.1.20</a></li><li><a href=/2-1-21/>2.1.21</a></li><li><a href=/2-1-22/>2.1.22</a></li><li><a href=/2-1-23/>2.1.23</a></li><li><a href=/2-1-24/>2.1.24</a></li><li><a href=/2-1-25/>2.1.25</a></li><li><a href=/2-1-26/>2.1.26</a></li><li><a href=/2-1-27/>2.1.27</a></li><li><a href=/2-1-28/>2.1.28</a></li><li><a href=/2-1-29/>2.1.29</a></li><li><a href=/2-1-30/>2.1.30</a></li><li><a href=/2-1-31/>2.1.31</a></li><li><a href=/2-1-32/>2.1.32</a></li><li><a href=/2-1-33/>2.1.33</a></li><li><a href=/2-1-34/>2.1.34</a></li><li><a href=/2-1-35/>2.1.35</a></li><li><a href=/2-1-36/>2.1.36</a></li><li><a href=/2-1-37/>2.1.37</a></li><li><a href=/2-1-38/>2.1.38</a></li><li><a href=/2-2-1/>2.2.1</a></li><li><a href=/2-2-2/>2.2.2</a></li><li><a href=/2-2-3/>2.2.3</a></li><li><a href=/2-2-4/>2.2.4</a></li><li><a href=/2-2-5/>2.2.5</a></li><li><a href=/2-2-6/>2.2.6</a></li><li><a href=/2-2-7/>2.2.7</a></li><li><a href=/2-2-8/>2.2.8</a></li><li><a href=/2-2-9/>2.2.9</a></li><li><a href=/2-2-10/>2.2.10</a></li><li><a href=/2-2-11/>2.2.11</a></li><li><a href=/2-2-12/>2.2.12</a></li><li><a href=/2-2-13/>2.2.13</a></li><li><a href=/2-2-14/>2.2.14</a></li><li><a href=/2-2-15/>2.2.15</a></li><li><a href=/2-2-16/>2.2.16</a></li><li><a href=/2-2-17/>2.2.17</a></li><li><a href=/2-2-18/>2.2.18</a></li><li><a href=/2-2-19/>2.2.19</a></li><li><a href=/2-2-20/>2.2.20</a></li><li><a href=/2-2-21/>2.2.21</a></li><li><a href=/2-2-22/>2.2.22</a></li><li><a href=/2-2-23/>2.2.23</a></li><li><a href=/2-2-24/>2.2.24</a></li><li><a href=/2-2-25/>2.2.25</a></li><li><a href=/2-2-26/>2.2.26</a></li><li><a href=/2-2-27/>2.2.27</a></li><li><a href=/2-2-28/>2.2.28</a></li><li><a href=/2-2-29/>2.2.29</a></li><li><a href=/2-3-1/>2.3.1</a></li><li><a href=/2-3-2/>2.3.2</a></li><li><a href=/2-3-3/>2.3.3</a></li><li><a href=/2-3-4/>2.3.4</a></li><li><a href=/2-3-5/>2.3.5</a></li><li><a href=/2-3-6/>2.3.6</a></li><li><a href=/2-3-7/>2.3.7</a></li><li><a href=/2-3-8/>2.3.8</a></li><li><a href=/2-3-9/>2.3.9</a></li><li><a href=/2-3-10/>2.3.10</a></li><li><a href=/2-3-11/>2.3.11</a></li><li><a href=/2-3-12/>2.3.12</a></li><li><a href=/2-3-13/>2.3.13</a></li><li><a href=/2-3-14/>2.3.14</a></li><li><a href=/2-3-15/>2.3.15</a></li><li><a href=/2-3-16/>2.3.16</a></li><li><a href=/2-3-17/>2.3.17</a></li><li><a href=/2-3-18/>2.3.18</a></li><li><a href=/2-3-19/>2.3.19</a></li><li><a href=/2-3-20/>2.3.20</a></li><li><a href=/2-3-21/>2.3.21</a></li><li><a href=/2-3-22/>2.3.22</a></li><li><a href=/2-3-23/>2.3.23</a></li><li><a href=/2-3-24/>2.3.24</a></li><li><a href=/2-3-25/>2.3.25</a></li><li><a href=/2-3-26/>2.3.26</a></li><li><a href=/2-3-27/>2.3.27</a></li><li><a href=/2-3-28/>2.3.28</a></li><li><a href=/2-3-29/>2.3.29</a></li><li><a href=/2-3-30/>2.3.30</a></li><li><a href=/2-3-31/>2.3.31</a></li><li><a href=/2-4-1/>2.4.1</a></li><li><a href=/2-4-2/>2.4.2</a></li><li><a href=/2-4-3/>2.4.3</a></li><li><a href=/2-4-4/>2.4.4</a></li><li><a href=/2-4-5/>2.4.5</a></li><li><a href=/2-4-6/>2.4.6</a></li><li><a href=/2-4-7/>2.4.7</a></li><li><a href=/2-4-8/>2.4.8</a></li><li><a href=/2-4-9/>2.4.9</a></li><li><a href=/2-4-10/>2.4.10</a></li><li><a href=/2-4-11/>2.4.11</a></li><li><a href=/2-4-12/>2.4.12</a></li><li><a href=/2-4-13/>2.4.13</a></li><li><a href=/2-4-14/>2.4.14</a></li><li><a href=/2-4-15/>2.4.15</a></li><li><a href=/2-4-16/>2.4.16</a></li><li><a href=/2-4-17/>2.4.17</a></li><li><a href=/2-4-18/>2.4.18</a></li><li><a href=/2-4-19/>2.4.19</a></li><li><a href=/2-4-20/>2.4.20</a></li><li><a href=/2-4-21/>2.4.21</a></li><li><a href=/2-4-22/>2.4.22</a></li><li><a href=/2-4-23/>2.4.23</a></li><li><a href=/2-4-24/>2.4.24</a></li><li><a href=/2-4-25/>2.4.25</a></li><li><a href=/2-4-26/>2.4.26</a></li><li><a href=/2-4-27/>2.4.27</a></li><li><a href=/2-4-28/>2.4.28</a></li><li><a href=/2-4-29/>2.4.29</a></li><li><a href=/2-4-30/>2.4.30</a></li><li><a href=/2-4-31/>2.4.31</a></li><li><a href=/2-4-32/>2.4.32</a></li><li><a href=/2-4-33/>2.4.33</a></li><li><a href=/2-4-34/>2.4.34</a></li><li><a href=/2-4-35/>2.4.35</a></li><li><a href=/2-4-36/>2.4.36</a></li><li><a href=/2-4-37/>2.4.37</a></li><li><a href=/2-4-38/>2.4.38</a></li><li><a href=/2-4-39/>2.4.39</a></li><li><a href=/2-4-40/>2.4.40</a></li><li><a href=/2-4-41/>2.4.41</a></li><li><a href=/2-4-42/>2.4.42</a></li><li><a href=/2-5-1/>2.5.1</a></li><li><a href=/2-5-2/>2.5.2</a></li><li><a href=/2-5-3/>2.5.3</a></li><li><a href=/2-5-4/>2.5.4</a></li><li><a href=/2-5-5/>2.5.5</a></li><li><a href=/2-5-6/>2.5.6</a></li><li><a href=/2-5-7/>2.5.7</a></li><li><a href=/2-5-8/>2.5.8</a></li><li><a href=/2-5-9/>2.5.9</a></li><li><a href=/2-5-10/>2.5.10</a></li><li><a href=/2-5-11/>2.5.11</a></li><li><a href=/2-5-12/>2.5.12</a></li><li><a href=/2-5-13/>2.5.13</a></li><li><a href=/2-5-14/>2.5.14</a></li><li><a href=/2-5-15/>2.5.15</a></li><li><a href=/2-5-16/>2.5.16</a></li><li><a href=/2-5-17/>2.5.17</a></li><li><a href=/2-5-18/>2.5.18</a></li><li><a href=/2-5-19/>2.5.19</a></li><li><a href=/2-5-20/>2.5.20</a></li><li><a href=/2-5-21/>2.5.21</a></li><li><a href=/2-5-22/>2.5.22</a></li><li><a href=/2-5-23/>2.5.23</a></li><li><a href=/2-5-24/>2.5.24</a></li><li><a href=/2-5-25/>2.5.25</a></li><li><a href=/2-5-26/>2.5.26</a></li><li><a href=/2-5-27/>2.5.27</a></li><li><a href=/2-5-28/>2.5.28</a></li><li><a href=/2-5-29/>2.5.29</a></li><li><a href=/2-5-30/>2.5.30</a></li><li><a href=/2-5-31/>2.5.31</a></li><li><a href=/2-5-32/>2.5.32</a></li><li><a href=/2-5-33/>2.5.33</a></li><li><a href=/3-1-1/>3.1.1</a></li><li><a href=/3-1-2/>3.1.2</a></li><li><a href=/3-1-3/>3.1.3</a></li><li><a href=/3-1-4/>3.1.4</a></li><li><a href=/3-1-5/>3.1.5</a></li><li><a href=/3-1-6/>3.1.6</a></li><li><a href=/3-1-7/>3.1.7</a></li><li><a href=/3-1-8/>3.1.8</a></li><li><a href=/3-1-9/>3.1.9</a></li><li><a href=/3-1-10/>3.1.10</a></li><li><a href=/3-1-11/>3.1.11</a></li><li><a href=/3-1-12/>3.1.12</a></li><li><a href=/3-1-13/>3.1.13</a></li><li><a href=/3-1-14/>3.1.14</a></li><li><a href=/3-1-15/>3.1.15</a></li><li><a href=/3-1-16/>3.1.16</a></li><li><a href=/3-1-17/>3.1.17</a></li><li><a href=/3-1-18/>3.1.18</a></li><li><a href=/3-1-19/>3.1.19</a></li><li><a href=/3-1-20/>3.1.20</a></li><li><a href=/3-1-21/>3.1.21</a></li><li><a href=/3-1-22/>3.1.22</a></li><li><a href=/3-1-23/>3.1.23</a></li><li><a href=/3-1-24/>3.1.24</a></li><li><a href=/3-1-25/>3.1.25</a></li><li><a href=/3-1-26/>3.1.26</a></li><li><a href=/3-1-27/>3.1.27</a></li><li><a href=/3-1-28/>3.1.28</a></li><li><a href=/3-1-29/>3.1.29</a></li><li><a href=/3-1-30/>3.1.30</a></li><li><a href=/3-1-31/>3.1.31</a></li><li><a href=/3-1-32/>3.1.32</a></li><li><a href=/3-1-33/>3.1.33</a></li><li><a href=/3-1-34/>3.1.34</a></li><li><a href=/3-1-35/>3.1.35</a></li><li><a href=/3-1-36/>3.1.36</a></li><li><a href=/3-1-37/>3.1.37</a></li><li><a href=/3-1-38/>3.1.38</a></li><li><a href=/3-1-39/>3.1.39</a></li><li><a href=/3-1-40/>3.1.40</a></li><li><a href=/3-1-41/>3.1.41</a></li><li><a href=/3-2-1/>3.2.1</a></li><li><a href=/3-2-2/>3.2.2</a></li><li><a href=/3-2-3/>3.2.3</a></li><li><a href=/3-2-4/>3.2.4</a></li><li><a href=/3-2-5/>3.2.5</a></li><li><a href=/3-2-6/>3.2.6</a></li><li><a href=/3-2-7/>3.2.7</a></li><li><a href=/3-2-8/>3.2.8</a></li><li><a href=/3-2-9/>3.2.9</a></li><li><a href=/3-2-10/>3.2.10</a></li><li><a href=/3-2-11/>3.2.11</a></li><li><a href=/3-2-12/>3.2.12</a></li><li><a href=/3-2-13/>3.2.13</a></li><li><a href=/3-2-14/>3.2.14</a></li><li><a href=/3-2-15/>3.2.15</a></li><li><a href=/3-2-16/>3.2.16</a></li><li><a href=/3-2-17/>3.2.17</a></li><li><a href=/3-2-18/>3.2.18</a></li><li><a href=/3-2-19/>3.2.19</a></li><li><a href=/3-2-20/>3.2.20</a></li><li><a href=/3-2-21/>3.2.21</a></li><li><a href=/3-2-22/>3.2.22</a></li><li><a href=/3-2-23/>3.2.23</a></li><li><a href=/3-2-24/>3.2.24</a></li><li><a href=/3-2-25/>3.2.25</a></li><li><a href=/3-2-26/>3.2.26</a></li><li><a href=/3-2-27/>3.2.27</a></li><li><a href=/3-2-28/>3.2.28</a></li><li><a href=/3-2-29/>3.2.29</a></li><li><a href=/3-2-30/>3.2.30</a></li><li><a href=/3-2-31/>3.2.31</a></li><li><a href=/3-2-32/>3.2.32</a></li><li><a href=/3-2-33/>3.2.33</a></li><li><a href=/3-2-34/>3.2.34</a></li><li><a href=/3-2-35/>3.2.35</a></li><li><a href=/3-2-36/>3.2.36</a></li><li><a href=/3-2-37/>3.2.37</a></li><li><a href=/3-2-38/>3.2.38</a></li><li><a href=/3-2-39/>3.2.39</a></li><li><a href=/3-2-40/>3.2.40</a></li><li><a href=/3-2-41/>3.2.41</a></li><li><a href=/3-2-42/>3.2.42</a></li><li><a href=/3-2-43/>3.2.43</a></li><li><a href=/3-2-44/>3.2.44</a></li><li><a href=/3-2-45/>3.2.45</a></li><li><a href=/3-2-46/>3.2.46</a></li><li><a href=/3-2-47/>3.2.47</a></li><li><a href=/3-3-1/>3.3.1</a></li><li><a href=/3-3-2/>3.3.2</a></li><li><a href=/3-3-3/>3.3.3</a></li><li><a href=/3-3-4/>3.3.4</a></li><li><a href=/3-3-5/>3.3.5</a></li><li><a href=/3-3-6/>3.3.6</a></li><li><a href=/3-3-7/>3.3.7</a></li><li><a href=/3-3-8/>3.3.8</a></li><li><a href=/3-3-9/>3.3.9</a></li><li><a href=/3-3-10/>3.3.10</a></li><li><a href=/3-3-11/>3.3.11</a></li><li><a href=/3-3-12/>3.3.12</a></li><li><a href=/3-3-13/>3.3.13</a></li><li><a href=/3-3-14/>3.3.14</a></li><li><a href=/run-solution-code/>如何：运行题解代码</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>1.3.49</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#解答>解答</a></li><li><a href=#先导知识用两个栈模拟一个队列>先导知识——用两个栈模拟一个队列</a></li><li><a href=#分摊-on>分摊 O(n)</a></li><li><a href=#对复制时-enqueue-的支持和-t-的引入>对复制时 Enqueue 的支持和 T&rsquo; 的引入</a></li><li><a href=#h-与-hr-对复制时出入队序列支持的扩展>h 与 HR ，对复制时出入队序列支持的扩展</a></li><li><a href=#有关复制开始时机的证明>有关复制开始时机的证明</a></li><li><a href=#程序设计>程序设计</a></li><li><a href=#代码>代码</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></aside></header><article class=markdown><h1 id=1349>1.3.49
<a class=anchor href=#1349>#</a></h1><h2 id=解答>解答
<a class=anchor href=#%e8%a7%a3%e7%ad%94>#</a></h2><p>那么这里就使用六个栈来解决这个问题。
这个算法来自于<a href="https://ecommons.cornell.edu/bitstream/handle/1813/6273/80-433.pdf?sequence=1&isAllowed=y">这篇论文</a>。</p><p>原文里用的是 Pure Lisp，不过语法很简单，还是很容易看懂的。</p><h2 id=先导知识用两个栈模拟一个队列>先导知识——用两个栈模拟一个队列
<a class=anchor href=#%e5%85%88%e5%af%bc%e7%9f%a5%e8%af%86%e7%94%a8%e4%b8%a4%e4%b8%aa%e6%a0%88%e6%a8%a1%e6%8b%9f%e4%b8%80%e4%b8%aa%e9%98%9f%e5%88%97>#</a></h2><p>如何使用两个栈来模拟一个队列操作？</p><p>这是一道很经典的题目，答案也有很多种，这里只介绍之后会用到的一种方法。</p><p>首先我们有两个栈，H 和 T，分别用作出队和入队用。</p><p><img src=/resources/1-3-49/1.png alt></p><p>这样，入队操作等同于向 T 添加元素，T 的入栈操作只需要 O(1) 时间。</p><p><img src=/resources/1-3-49/2.png alt></p><p>如果 H 不为空，出队操作等同于 H 弹栈，H 的弹栈操作也只需要 O(1) 时间。</p><p><img src=/resources/1-3-49/3.png alt></p><p>但如果 H 为空，则需要将 T 中的元素依次弹出并压入到 H 中，这是一个 O(n) 的操作。</p><p><img src=/resources/1-3-49/4.png alt></p><p>显然，这种方式中，出队操作的最坏时间复杂度是 O(n)，并不满足题目要求。</p><h2 id=分摊-on>分摊 O(n)
<a class=anchor href=#%e5%88%86%e6%91%8a-on>#</a></h2><p>那么，怎么解决这个问题呢？</p><p>一个很自然的想法是，如果在栈 H 变为空之前，我们就能逐步将栈 T 的内容弹出并压入到另一个栈 H&rsquo; 中，等到栈 H 为空时，直接交换 H 和 H&rsquo; 即可。</p><p>假设目前的队列状态是这样，有三个元素等待出队，还有三个元素等待入队。</p><p><img src=/resources/1-3-49/5.png alt></p><p>现在依次让三个元素出队，与此同时我们让栈 T 中的元素依次进入 H&rsquo; 中。</p><p>每一次出队都执行两个操作，元素出队和元素复制（Pop & Push），时间复杂度 O(1) + O(1) + O(1) = O(1)。</p><p>第一次操作（出队）</p><p><img src=/resources/1-3-49/6.png alt></p><p>第二次操作（出队）</p><p><img src=/resources/1-3-49/7.png alt></p><p>第三次操作（出队）</p><p><img src=/resources/1-3-49/8.png alt></p><p>现在栈 H 和栈 T 都为空，下一次出队操作时，我们直接交换栈 H 和栈 H&rsquo;（由于是交换引用，因此时间复杂度仍为 O(1)）。</p><p><img src=/resources/1-3-49/9.png alt></p><p>之后再进行出队操作。</p><p>这就是这个算法基本想法，在栈 H 变为空之前，分步将栈 T 中的内容分步复制到另一个栈中。</p><p>当栈 H 为空时直接用准备好的栈 H&rsquo; 替代 H，保证时间复杂
度为常数。</p><h2 id=对复制时-enqueue-的支持和-t-的引入>对复制时 Enqueue 的支持和 T&rsquo; 的引入
<a class=anchor href=#%e5%af%b9%e5%a4%8d%e5%88%b6%e6%97%b6-enqueue-%e7%9a%84%e6%94%af%e6%8c%81%e5%92%8c-t-%e7%9a%84%e5%bc%95%e5%85%a5>#</a></h2><p>刚才是一种理想情况，显然我们的队列在复制时不可能只发生出队操作，为了增加对入队操作的支持，我们引入临时栈 T&rsquo;。</p><p>例如我们有队列状态如下，现在启动复制进程，入队操作全部由 T&rsquo; 完成。</p><p><img src=/resources/1-3-49/10.png alt></p><p>我们进行一次入队操作和两次出队操作，如下组图所示：</p><p>第一次操作（入队）</p><p><img src=/resources/1-3-49/11.png alt></p><p>第二次操作（出队）</p><p><img src=/resources/1-3-49/12.png alt></p><p>第三次操作（出队）</p><p><img src=/resources/1-3-49/13.png alt></p><p>现在 H 和 T 均为空，下一次操作时（不论入队还是出队），我们先交换 H 和 H&rsquo; 以及 T 和 T&rsquo;，同时让入队操作控制权回到 T。</p><p><img src=/resources/1-3-49/14.png alt></p><p>这样，我们增加了对复制时入队操作的支持，但还并不完全，只有在理想情况下才可以做到。</p><h2 id=h-与-hr-对复制时出入队序列支持的扩展>h 与 HR ，对复制时出入队序列支持的扩展
<a class=anchor href=#h-%e4%b8%8e-hr-%e5%af%b9%e5%a4%8d%e5%88%b6%e6%97%b6%e5%87%ba%e5%85%a5%e9%98%9f%e5%ba%8f%e5%88%97%e6%94%af%e6%8c%81%e7%9a%84%e6%89%a9%e5%b1%95>#</a></h2><p>在之前的例子中，当复制结束时 H 总是为空的，现在我们来讨论一下复制结束时 H 不为空的情况。</p><p>如果复制结束时 H 不为空，直接交换的结果是我们丢失了原来栈 H 中的数据。</p><p>因此，在翻转 T 的同时，我们还应翻转 H 到 HR，并在最后将 HR 的内容再度翻转并添加到 H&rsquo; 上。</p><p>这个过程可以以下图方式进行：</p><p>初始状态：</p><p><img src=/resources/1-3-49/15.png alt></p><p>第一次操作（入队），H->HR ,T->H&rsquo;，时间复杂度 O(1) + O(1) + O(1) + O(1) + O(1) = O(1)。</p><p><img src=/resources/1-3-49/16.png alt></p><p>第二次操作（入队）</p><p><img src=/resources/1-3-49/17.png alt></p><p>第三次操作（入队）</p><p><img src=/resources/1-3-49/18.png alt></p><p>第四次操作（入队）</p><p><img src=/resources/1-3-49/19.png alt></p><p>第五次操作（入队）</p><p><img src=/resources/1-3-49/20.png alt></p><p>第六次操作（出/入队执行前）</p><p><img src=/resources/1-3-49/21.png alt></p><p>这样我们就解决了 H 复制结束后不为空的问题，代价是引入了两个额外的问题：</p><p>问题一：操作次数增加到了 2k 次，k 代表栈 T 中的元素数量。（如果当 T 中元素数量大于 H 中元素数量时开始复制）</p><p>问题二：由于 H 被用于复制进程，我们无法在复制过程中支持出队操作。</p><p>第一个问题解决方案比较简单，我们可以在每一次出/入队操作执行时进行两次的复制步骤（对 T 和 H 进行两次的 Pop 操作），时间复杂度仍为 O(1)。</p><p>第二个问题我们通过引入栈 h 来解决。</p><p>h 用于在复制时代替 H 执行出队功能，它会在复制开始时自动变为栈 H 的一个浅拷贝（也就是说，h 和 H 共用同一片内存空间，但它们用于指示栈顶位置的指针相互独立）。</p><p>现在我们有了全部 6 个栈，它们的功能如下图所示（为了方便介绍我将一些栈的位置做了调换）。</p><p><img src=/resources/1-3-49/22.png alt></p><p>由于我们并不能预知接下来会发生的操作，因此当 H 栈中的元素数量第一次小于 T 栈中的元素数量时，我们就必须启动复制进程了（总是假设接下来全部都是出队操作）。我们引入一个布尔类型变量 IsCopying 来指示复制进程。</p><p><img src=/resources/1-3-49/23.png alt></p><p>现在我们进行第一次入队操作，IsCopying = true，开始复制。</p><p>首先 h 变为 H 的浅拷贝，这个过程是 O(1) 的。</p><p><img src=/resources/1-3-49/24.png alt></p><p>如果在复制过程中有出队操作，作为 H 的翻转 HR 中就有一个元素不再需要复制，我们引入一个变量 needcopy 来记录 HR 中需要复制的元素数量。</p><p><img src=/resources/1-3-49/25.png alt></p><p>接下来是两次复制操作，T 和 H 分别有两个元素进入了 H&rsquo; 和 HR 。</p><p><img src=/resources/1-3-49/26.png alt></p><p>然后是第二次出/入队操作，这次我们选择出队，1 出队后显然 HR 中的 1 不再需要复制，needcopy – 1。</p><p><img src=/resources/1-3-49/27.png alt></p><p>随后再是两次复制操作，第一次将 H 中的 3 移到 HR 中，needcopy + 1，T 中的 5 移到 H&rsquo; 中；第二次只将 T 中的 4 移到 H&rsquo; 中。</p><p><img src=/resources/1-3-49/28.png alt></p><p>第三次出/入队操作我们选择入队，8 入队。随后 HR 中的两个元素进入了 H&rsquo;，needcopy – 2。</p><p><img src=/resources/1-3-49/29.png alt></p><p>由于 needcopy 变成了 0，我们再额外进行一次交换操作，并将 IsCopying 置为 false。</p><p><img src=/resources/1-3-49/30.png alt></p><p>至此，完整的算法运行完毕。</p><h2 id=有关复制开始时机的证明>有关复制开始时机的证明
<a class=anchor href=#%e6%9c%89%e5%85%b3%e5%a4%8d%e5%88%b6%e5%bc%80%e5%a7%8b%e6%97%b6%e6%9c%ba%e7%9a%84%e8%af%81%e6%98%8e>#</a></h2><p>这里我们选择了在第 k + 1 个元素入队时开始复制，现在证明一定能够在 h 空之前完成复制：</p><p>假设复制开始时 H 有 k 个元素，T 有 k + 1个元素。</p><p>完成第一轮复制（H->HR , T->H&rsquo;）需要 k + 1 次操作，</p><p>完成第二轮复制（H->H&rsquo;）需要 k 次操作，总共需要 2k + 1 次操作才能完成复制。</p><p>而 h 的长度为 k，能够提供 2k 次的操作机会。第 k + 1 个元素入队时也能提供 2 次操作机会，因此一共是 2k + 2 次操作机会。</p><p>由于 2k + 1 &lt; 2k + 2，我们证明了该算法能够及时完成复制工作。</p><h2 id=程序设计>程序设计
<a class=anchor href=#%e7%a8%8b%e5%ba%8f%e8%ae%be%e8%ae%a1>#</a></h2><p>根据之前的内容，我们可以开始设计程序了。主要实现三个功能，Enqueue(), Dequeue() 和 Peek()。</p><p>根据算法要求我们添加一个进行复制时操作的函数 OneStep()，用于执行元素的复制，栈交换等操作。</p><p>Peek() 只需要根据是否在进行复制选择栈 h 或栈 H 进行 Peek()。</p><p>Enqueue()</p><pre tabindex=0><code>1. 如果不处于复制状态
   1. 如果 H.Length – T.Length &gt; 0，直接将元素压入栈 T。
   2. 否则令 IsCopying = true，h 进行浅拷贝，进行两次的 OneStep。
2. 如果处于复制状态，将元素压入 T&#39;，进行两次的 OneStep
</code></pre><p>Dequeue()</p><pre tabindex=0><code>1. 如果不处于复制状态
   1. 如果 H.Length – T.Length &gt; 0，直接从 H 弹出元素。
   2. 否则从 H 弹出元素，IsCopying = true，h 进行浅拷贝，进行两次的 OneStep。
2. 如果处于复制状态，从 h 弹出元素，needcopy - 1，进行两次的 OneStep。
</code></pre><p>OneStep()</p><pre tabindex=0><code>1. 如果不处于复制状态，什么也不做。
2. 如果处于复制状态。
   1. 如果 H 和 T 都不为空，从 H 搬运一个元素至 HR  ，从 T 搬运一个元素至 H&#39; ，needcopy + 1。
   2. 如果 H 为空但 T 不为空，从 T 搬运一个元素至 H&#39; 。
   3. 如果 H 和 T 都为空，但 needcopy &gt; 1，从 HR  搬运一个元素至 H&#39; ，needcopy – 1。
   4. 如果 H 和 T 都为空，但 needcopy = 1，从 HR  搬运一个元素至 H&#39; ，needcopy – 1，交换 H 和 H&#39; 以及 T 和 T&#39;，其他栈置空，退出复制状态。
   5. 如果 H 和 T 都为空，但 needcopy = 0，交换 H 和 H&#39; 以及 T 和 T&#39;，其他栈置空，退出复制状态。
</code></pre><h2 id=代码>代码
<a class=anchor href=#%e4%bb%a3%e7%a0%81>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>internal</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StackQueue</span>&lt;TItem&gt;
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Stack&lt;TItem&gt; H;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Stack&lt;TItem&gt; T;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Stack&lt;TItem&gt; h;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Stack&lt;TItem&gt; HH;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Stack&lt;TItem&gt; TT;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Stack&lt;TItem&gt; Hr;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>bool</span> _isRecopying;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> _nowCopying;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> StackQueue()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        _isRecopying = <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>        _nowCopying = <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        H = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>        T = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>        h = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>        HH = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>        TT = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>        Hr = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> TItem Peek()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (_isRecopying)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> h.Peek();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> H.Peek();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Enqueue(TItem item)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (!_isRecopying &amp;&amp; Lendiff() &gt; <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            _nowCopying = <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>            T.Push(item);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (!_isRecopying &amp;&amp; Lendiff() == <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            T.Push(item);
</span></span><span style=display:flex><span>            _isRecopying = <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>            h = H.Copy();
</span></span><span style=display:flex><span>            OneStep(OneStep(<span style=color:#66d9ef>this</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (_isRecopying)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            TT.Push(item);
</span></span><span style=display:flex><span>            OneStep(OneStep(<span style=color:#66d9ef>this</span>));
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Lendiff()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> H.Size() - T.Size();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> TItem Dequeue()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (!_isRecopying &amp;&amp; Lendiff() &gt; <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> H.Pop();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (!_isRecopying &amp;&amp; Lendiff() == <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> temp = H.Pop();
</span></span><span style=display:flex><span>            h = H.Copy();
</span></span><span style=display:flex><span>            _isRecopying = <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>            OneStep(OneStep(<span style=color:#66d9ef>this</span>));
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> temp;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> temp = h.Pop();
</span></span><span style=display:flex><span>            _nowCopying--;
</span></span><span style=display:flex><span>            OneStep(OneStep(<span style=color:#66d9ef>this</span>));
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> temp;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> StackQueue&lt;TItem&gt; OneStep(StackQueue&lt;TItem&gt; q)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (q._isRecopying &amp;&amp; !q.H.IsEmpty() &amp;&amp; !q.T.IsEmpty())
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            q._nowCopying++;
</span></span><span style=display:flex><span>            q.HH.Push(q.T.Pop());
</span></span><span style=display:flex><span>            q.Hr.Push(q.H.Pop());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (q._isRecopying &amp;&amp; q.H.IsEmpty() &amp;&amp; !q.T.IsEmpty())
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            q._isRecopying = <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>            q.HH.Push(q.T.Pop());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (q._isRecopying &amp;&amp; q.H.IsEmpty() &amp;&amp; q.T.IsEmpty() &amp;&amp; q._nowCopying &gt; <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            q._isRecopying = <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>            q._nowCopying--;
</span></span><span style=display:flex><span>            q.HH.Push(q.Hr.Pop());
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (q._isRecopying &amp;&amp; q.H.IsEmpty() &amp;&amp; q.T.IsEmpty() &amp;&amp; q._nowCopying == <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            q._isRecopying = <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>            q._nowCopying--;
</span></span><span style=display:flex><span>            q.HH.Push(q.Hr.Pop());
</span></span><span style=display:flex><span>            q.H = q.HH;
</span></span><span style=display:flex><span>            q.T = q.TT;
</span></span><span style=display:flex><span>            q.HH = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>            q.TT = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>            q.Hr = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>            q.h = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (q._isRecopying &amp;&amp; q.H.IsEmpty() &amp;&amp; q.T.IsEmpty() &amp;&amp; q._nowCopying == <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            q._isRecopying = <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>            q.H = q.HH;
</span></span><span style=display:flex><span>            q.T = q.TT;
</span></span><span style=display:flex><span>            q.HH = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>            q.TT = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>            q.Hr = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>            q.h = <span style=color:#66d9ef>new</span> Stack&lt;TItem&gt;();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> q;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=另请参阅>另请参阅
<a class=anchor href=#%e5%8f%a6%e8%af%b7%e5%8f%82%e9%98%85>#</a></h2><p><a href=https://stackoverflow.com/questions/5538192/how-to-implement-a-queue-with-three-stacks>StackOverflow-How to implement a queue with three stacks?</a>——Stack Overflow 上关于这个问题的讨论。</p><p><a href="https://ecommons.cornell.edu/bitstream/handle/1813/6273/80-433.pdf?sequence=1&isAllowed=y">Real Time Queue Operation in Pure LISP-Robert Hood, Robert Melville</a>——用六个栈实现常数操作队列的论文。</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/ikesnowy/Algorithms-4th-Edition-in-Csharp/commit/f6cd4bdff6b280ecf021e947d0a534eb9c316d29 title='最后修改者 沈星繁 | 2022-6-25' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>2022-6-25</span></a></div><div><a class="flex align-center" href="https://github.com/ikesnowy/Algorithms-4th-Edition-in-Csharp/issues/new?assignees=ikesnowy&labels=BUG&template=----.md&title=%5BBUG%5D1.3.49" target=_blank rel=noopener><img src=/svg/bug-report.svg class=book-icon alt=Edit>
<span>问题反馈</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#解答>解答</a></li><li><a href=#先导知识用两个栈模拟一个队列>先导知识——用两个栈模拟一个队列</a></li><li><a href=#分摊-on>分摊 O(n)</a></li><li><a href=#对复制时-enqueue-的支持和-t-的引入>对复制时 Enqueue 的支持和 T&rsquo; 的引入</a></li><li><a href=#h-与-hr-对复制时出入队序列支持的扩展>h 与 HR ，对复制时出入队序列支持的扩展</a></li><li><a href=#有关复制开始时机的证明>有关复制开始时机的证明</a></li><li><a href=#程序设计>程序设计</a></li><li><a href=#代码>代码</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></div></aside></main></body></html>