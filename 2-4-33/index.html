<!doctype html><html lang=zh dir=" ltr">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="2.4.33 #  解答 #  官方实现见：https://algs4.cs.princeton.edu/24pq/IndexMaxPQ.java.html
书中算法 2.6 给出的是一个最大堆的实现，但本题给出的部分解答却是最小堆的。
同时官网给出的解答是最大堆的，这里选择和官网保持一致，给出最大堆的实现。
初看起来可能会比较难理解，但其实就是以指针为元素的堆。
堆中存放的只是指向元素的指针（如果元素在数组里那就变成了下标）。
做比较的时候要先根据指针（下标）找到对应元素，再进行比较。
再来看题目中给出的要求，keys[] 数组中用于保存元素（比如 keys[0] = ‘A’;），
而 pq[] 中保存的是元素在 key[] 数组中的下标（比如 pq[1] = 0;)，
而 qp[] 中保存的是某个下标在 pq[]中 的对应位置。（比如 qp[0] = 1）。
在这三个数组中，pq[]是一个堆，我们的堆操作都作用在这个数组上。
keys[] 数组中的元素不随着 pq[] 中下标的移动而移动，只有当删除或添加元素时才发生变化。
qp[]与pq[]中的索引一一对应，pq[]交换时也需要交换qp[]中的对应元素。
代码 #  using System; using System.Collections; using System.Collections.Generic; namespace PriorityQueue { /// <summary>  /// 索引优先队列。  /// </summary>  /// <typeparam name=&#34;Key&#34;>优先队列中包含的元素。</typeparam>  public class IndexMaxPQ<Key> : IEnumerable<int> where Key : IComparable<Key> { /// <summary>  /// 优先队列中的元素。  /// </summary>  private int n; /// <summary>  /// 索引最大堆。  /// </summary>  private int[] pq; /// <summary>  /// pq 的逆索引，pq[qp[i]]=qp[pq[i]]=i  /// </summary>  private int[] qp; /// <summary>  /// 实际元素。  /// </summary>  private Key[] keys; /// <summary>  /// 建立指定大小的面向索引的最大堆。  /// </summary>  /// <param name=&#34;capacity&#34;></param>  public IndexMaxPQ(int capacity) { if (capacity < 0) throw new ArgumentOutOfRangeException(); this.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="2.4.33">
<meta property="og:description" content="2.4.33 #  解答 #  官方实现见：https://algs4.cs.princeton.edu/24pq/IndexMaxPQ.java.html
书中算法 2.6 给出的是一个最大堆的实现，但本题给出的部分解答却是最小堆的。
同时官网给出的解答是最大堆的，这里选择和官网保持一致，给出最大堆的实现。
初看起来可能会比较难理解，但其实就是以指针为元素的堆。
堆中存放的只是指向元素的指针（如果元素在数组里那就变成了下标）。
做比较的时候要先根据指针（下标）找到对应元素，再进行比较。
再来看题目中给出的要求，keys[] 数组中用于保存元素（比如 keys[0] = ‘A’;），
而 pq[] 中保存的是元素在 key[] 数组中的下标（比如 pq[1] = 0;)，
而 qp[] 中保存的是某个下标在 pq[]中 的对应位置。（比如 qp[0] = 1）。
在这三个数组中，pq[]是一个堆，我们的堆操作都作用在这个数组上。
keys[] 数组中的元素不随着 pq[] 中下标的移动而移动，只有当删除或添加元素时才发生变化。
qp[]与pq[]中的索引一一对应，pq[]交换时也需要交换qp[]中的对应元素。
代码 #  using System; using System.Collections; using System.Collections.Generic; namespace PriorityQueue { /// <summary>  /// 索引优先队列。  /// </summary>  /// <typeparam name=&#34;Key&#34;>优先队列中包含的元素。</typeparam>  public class IndexMaxPQ<Key> : IEnumerable<int> where Key : IComparable<Key> { /// <summary>  /// 优先队列中的元素。  /// </summary>  private int n; /// <summary>  /// 索引最大堆。  /// </summary>  private int[] pq; /// <summary>  /// pq 的逆索引，pq[qp[i]]=qp[pq[i]]=i  /// </summary>  private int[] qp; /// <summary>  /// 实际元素。  /// </summary>  private Key[] keys; /// <summary>  /// 建立指定大小的面向索引的最大堆。  /// </summary>  /// <param name=&#34;capacity&#34;></param>  public IndexMaxPQ(int capacity) { if (capacity < 0) throw new ArgumentOutOfRangeException(); this.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://alg4.ikesnowy.com/2-4-33/"><meta property="article:section" content>
<meta property="article:published_time" content="2018-11-02T20:56:58+00:00">
<meta property="article:modified_time" content="2022-02-22T22:22:44+08:00">
<title>2.4.33 | 《算法（第四版）》C# 题解</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.svg type=image/x-icon>
<link rel=stylesheet href=/book.min.97cfda4f5e3c9fa49a2bf8d401f4ddc0eec576c99cdcf6afbec19173200c37db.css integrity="sha256-l8/aT148n6SaK/jUAfTdwO7Fdsmc3PavvsGRcyAMN9s=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/zh.search.min.09a27e5290c5156a6a6913223ba7ef74531b37b5b52d4c4ab1dd25f52d627e89.js integrity="sha256-CaJ+UpDFFWpqaRMiO6fvdFMbN7W1LUxKsd0l9S1ifok=" crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-121852990-1','auto'),ga('send','pageview'))</script>
<script>window.katexOption={delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]}</script>
<link rel=stylesheet href=/katex/katex.min.css>
<script defer src=/katex/katex.min.js></script>
<script defer src=/katex/auto-render.min.js onload=renderMathInElement(document.body,window.katexOption)></script>
</head>
<body dir=" ltr">
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>《算法（第四版）》C# 题解</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li>
<a href=/thanks/>特别感谢</a>
</li>
<li>
<a href=/1-1-1/>1.1.1</a>
</li>
<li>
<a href=/1-1-2/>1.1.2</a>
</li>
<li>
<a href=/1-1-3/>1.1.3</a>
</li>
<li>
<a href=/1-1-4/>1.1.4</a>
</li>
<li>
<a href=/1-1-5/>1.1.5</a>
</li>
<li>
<a href=/1-1-6/>1.1.6</a>
</li>
<li>
<a href=/1-1-7/>1.1.7</a>
</li>
<li>
<a href=/1-1-8/>1.1.8</a>
</li>
<li>
<a href=/1-1-9/>1.1.9</a>
</li>
<li>
<a href=/1-1-10/>1.1.10</a>
</li>
<li>
<a href=/1-1-11/>1.1.11</a>
</li>
<li>
<a href=/1-1-12/>1.1.12</a>
</li>
<li>
<a href=/1-1-13/>1.1.13</a>
</li>
<li>
<a href=/1-1-14/>1.1.14</a>
</li>
<li>
<a href=/1-1-15/>1.1.15</a>
</li>
<li>
<a href=/1-1-16/>1.1.16</a>
</li>
<li>
<a href=/1-1-17/>1.1.17</a>
</li>
<li>
<a href=/1-1-18/>1.1.18</a>
</li>
<li>
<a href=/1-1-19/>1.1.19</a>
</li>
<li>
<a href=/1-1-20/>1.1.20</a>
</li>
<li>
<a href=/1-1-21/>1.1.21</a>
</li>
<li>
<a href=/1-1-22/>1.1.22</a>
</li>
<li>
<a href=/1-1-23/>1.1.23</a>
</li>
<li>
<a href=/1-1-24/>1.1.24</a>
</li>
<li>
<a href=/1-1-25/>1.1.25</a>
</li>
<li>
<a href=/1-1-26/>1.1.26</a>
</li>
<li>
<a href=/1-1-27/>1.1.27</a>
</li>
<li>
<a href=/1-1-28/>1.1.28</a>
</li>
<li>
<a href=/1-1-29/>1.1.29</a>
</li>
<li>
<a href=/1-1-30/>1.1.30</a>
</li>
<li>
<a href=/1-1-31/>1.1.31</a>
</li>
<li>
<a href=/1-1-32/>1.1.32</a>
</li>
<li>
<a href=/1-1-33/>1.1.33</a>
</li>
<li>
<a href=/1-1-34/>1.1.34</a>
</li>
<li>
<a href=/1-1-35/>1.1.35</a>
</li>
<li>
<a href=/1-1-36/>1.1.36</a>
</li>
<li>
<a href=/1-1-37/>1.1.37</a>
</li>
<li>
<a href=/1-1-38/>1.1.38</a>
</li>
<li>
<a href=/1-1-39/>1.1.39</a>
</li>
<li>
<a href=/1-2-1/>1.2.1</a>
</li>
<li>
<a href=/1-2-2/>1.2.2</a>
</li>
<li>
<a href=/1-2-3/>1.2.3</a>
</li>
<li>
<a href=/1-2-4/>1.2.4</a>
</li>
<li>
<a href=/1-2-5/>1.2.5</a>
</li>
<li>
<a href=/1-2-6/>1.2.6</a>
</li>
<li>
<a href=/1-2-7/>1.2.7</a>
</li>
<li>
<a href=/1-2-8/>1.2.8</a>
</li>
<li>
<a href=/1-2-9/>1.2.9</a>
</li>
<li>
<a href=/1-2-10/>1.2.10</a>
</li>
<li>
<a href=/1-2-11/>1.2.11</a>
</li>
<li>
<a href=/1-2-12/>1.2.12</a>
</li>
<li>
<a href=/1-2-13/>1.2.13</a>
</li>
<li>
<a href=/1-2-14/>1.2.14</a>
</li>
<li>
<a href=/1-2-15/>1.2.15</a>
</li>
<li>
<a href=/1-2-16/>1.2.16</a>
</li>
<li>
<a href=/1-2-17/>1.2.17</a>
</li>
<li>
<a href=/1-2-18/>1.2.18</a>
</li>
<li>
<a href=/1-2-19/>1.2.19</a>
</li>
<li>
<a href=/1-3-1/>1.3.1</a>
</li>
<li>
<a href=/1-3-2/>1.3.2</a>
</li>
<li>
<a href=/1-3-3/>1.3.3</a>
</li>
<li>
<a href=/1-3-4/>1.3.4</a>
</li>
<li>
<a href=/1-3-5/>1.3.5</a>
</li>
<li>
<a href=/1-3-6/>1.3.6</a>
</li>
<li>
<a href=/1-3-7/>1.3.7</a>
</li>
<li>
<a href=/1-3-8/>1.3.8</a>
</li>
<li>
<a href=/1-3-9/>1.3.9</a>
</li>
<li>
<a href=/1-3-10/>1.3.10</a>
</li>
<li>
<a href=/1-3-11/>1.3.11</a>
</li>
<li>
<a href=/1-3-12/>1.3.12</a>
</li>
<li>
<a href=/1-3-13/>1.3.13</a>
</li>
<li>
<a href=/1-3-14/>1.3.14</a>
</li>
<li>
<a href=/1-3-15/>1.3.15</a>
</li>
<li>
<a href=/1-3-16/>1.3.16</a>
</li>
<li>
<a href=/1-3-17/>1.3.17</a>
</li>
<li>
<a href=/1-3-18/>1.3.18</a>
</li>
<li>
<a href=/1-3-19/>1.3.19</a>
</li>
<li>
<a href=/1-3-20/>1.3.20</a>
</li>
<li>
<a href=/1-3-21/>1.3.21</a>
</li>
<li>
<a href=/1-3-22/>1.3.22</a>
</li>
<li>
<a href=/1-3-23/>1.3.23</a>
</li>
<li>
<a href=/1-3-24/>1.3.24</a>
</li>
<li>
<a href=/1-3-25/>1.3.25</a>
</li>
<li>
<a href=/1-3-26/>1.3.26</a>
</li>
<li>
<a href=/1-3-27/>1.3.27</a>
</li>
<li>
<a href=/1-3-28/>1.3.28</a>
</li>
<li>
<a href=/1-3-29/>1.3.29</a>
</li>
<li>
<a href=/1-3-30/>1.3.30</a>
</li>
<li>
<a href=/1-3-31/>1.3.31</a>
</li>
<li>
<a href=/1-3-32/>1.3.32</a>
</li>
<li>
<a href=/1-3-33/>1.3.33</a>
</li>
<li>
<a href=/1-3-34/>1.3.34</a>
</li>
<li>
<a href=/1-3-35/>1.3.35</a>
</li>
<li>
<a href=/1-3-36/>1.3.36</a>
</li>
<li>
<a href=/1-3-37/>1.3.37</a>
</li>
<li>
<a href=/1-3-38/>1.3.38</a>
</li>
<li>
<a href=/1-3-39/>1.3.39</a>
</li>
<li>
<a href=/1-3-40/>1.3.40</a>
</li>
<li>
<a href=/1-3-41/>1.3.41</a>
</li>
<li>
<a href=/1-3-42/>1.3.42</a>
</li>
<li>
<a href=/1-3-43/>1.3.43</a>
</li>
<li>
<a href=/1-3-44/>1.3.44</a>
</li>
<li>
<a href=/1-3-45/>1.3.45</a>
</li>
<li>
<a href=/1-3-46/>1.3.46</a>
</li>
<li>
<a href=/1-3-47/>1.3.47</a>
</li>
<li>
<a href=/1-3-48/>1.3.48</a>
</li>
<li>
<a href=/1-3-49/>1.3.49</a>
</li>
<li>
<a href=/1-3-50/>1.3.50</a>
</li>
<li>
<a href=/1-4-1/>1.4.1</a>
</li>
<li>
<a href=/1-4-2/>1.4.2</a>
</li>
<li>
<a href=/1-4-3/>1.4.3</a>
</li>
<li>
<a href=/1-4-4/>1.4.4</a>
</li>
<li>
<a href=/1-4-5/>1.4.5</a>
</li>
<li>
<a href=/1-4-6/>1.4.6</a>
</li>
<li>
<a href=/1-4-7/>1.4.7</a>
</li>
<li>
<a href=/1-4-8/>1.4.8</a>
</li>
<li>
<a href=/1-4-9/>1.4.9</a>
</li>
<li>
<a href=/1-4-10/>1.4.10</a>
</li>
<li>
<a href=/1-4-11/>1.4.11</a>
</li>
<li>
<a href=/1-4-12/>1.4.12</a>
</li>
<li>
<a href=/1-4-13/>1.4.13</a>
</li>
<li>
<a href=/1-4-14/>1.4.14</a>
</li>
<li>
<a href=/1-4-15/>1.4.15</a>
</li>
<li>
<a href=/1-4-16/>1.4.16</a>
</li>
<li>
<a href=/1-4-17/>1.4.17</a>
</li>
<li>
<a href=/1-4-18/>1.4.18</a>
</li>
<li>
<a href=/1-4-19/>1.4.19</a>
</li>
<li>
<a href=/1-4-20/>1.4.20</a>
</li>
<li>
<a href=/1-4-21/>1.4.21</a>
</li>
<li>
<a href=/1-4-22/>1.4.22</a>
</li>
<li>
<a href=/1-4-23/>1.4.23</a>
</li>
<li>
<a href=/1-4-24/>1.4.24</a>
</li>
<li>
<a href=/1-4-25/>1.4.25</a>
</li>
<li>
<a href=/1-4-26/>1.4.26</a>
</li>
<li>
<a href=/1-4-27/>1.4.27</a>
</li>
<li>
<a href=/1-4-28/>1.4.28</a>
</li>
<li>
<a href=/1-4-29/>1.4.29</a>
</li>
<li>
<a href=/1-4-30/>1.4.30</a>
</li>
<li>
<a href=/1-4-31/>1.4.31</a>
</li>
<li>
<a href=/1-4-32/>1.4.32</a>
</li>
<li>
<a href=/1-4-33/>1.4.33</a>
</li>
<li>
<a href=/1-4-34/>1.4.34</a>
</li>
<li>
<a href=/1-4-35/>1.4.35</a>
</li>
<li>
<a href=/1-4-36/>1.4.36</a>
</li>
<li>
<a href=/1-4-37/>1.4.37</a>
</li>
<li>
<a href=/1-4-38/>1.4.38</a>
</li>
<li>
<a href=/1-4-39/>1.4.39</a>
</li>
<li>
<a href=/1-4-40/>1.4.40</a>
</li>
<li>
<a href=/1-4-41/>1.4.41</a>
</li>
<li>
<a href=/1-4-42/>1.4.42</a>
</li>
<li>
<a href=/1-4-43/>1.4.43</a>
</li>
<li>
<a href=/1-4-44/>1.4.44</a>
</li>
<li>
<a href=/1-4-45/>1.4.45</a>
</li>
<li>
<a href=/1-5-1/>1.5.1</a>
</li>
<li>
<a href=/1-5-2/>1.5.2</a>
</li>
<li>
<a href=/1-5-3/>1.5.3</a>
</li>
<li>
<a href=/1-5-4/>1.5.4</a>
</li>
<li>
<a href=/1-5-5/>1.5.5</a>
</li>
<li>
<a href=/1-5-6/>1.5.6</a>
</li>
<li>
<a href=/1-5-7/>1.5.7</a>
</li>
<li>
<a href=/1-5-8/>1.5.8</a>
</li>
<li>
<a href=/1-5-9/>1.5.9</a>
</li>
<li>
<a href=/1-5-10/>1.5.10</a>
</li>
<li>
<a href=/1-5-11/>1.5.11</a>
</li>
<li>
<a href=/1-5-12/>1.5.12</a>
</li>
<li>
<a href=/1-5-13/>1.5.13</a>
</li>
<li>
<a href=/1-5-14/>1.5.14</a>
</li>
<li>
<a href=/1-5-15/>1.5.15</a>
</li>
<li>
<a href=/1-5-16/>1.5.16</a>
</li>
<li>
<a href=/1-5-17/>1.5.17</a>
</li>
<li>
<a href=/1-5-18/>1.5.18</a>
</li>
<li>
<a href=/1-5-19/>1.5.19</a>
</li>
<li>
<a href=/1-5-20/>1.5.20</a>
</li>
<li>
<a href=/1-5-21/>1.5.21</a>
</li>
<li>
<a href=/1-5-22/>1.5.22</a>
</li>
<li>
<a href=/1-5-23/>1.5.23</a>
</li>
<li>
<a href=/1-5-24/>1.5.24</a>
</li>
<li>
<a href=/1-5-25/>1.5.25</a>
</li>
<li>
<a href=/1-5-26/>1.5.26</a>
</li>
<li>
<a href=/2-1-1/>2.1.1</a>
</li>
<li>
<a href=/2-1-2/>2.1.2</a>
</li>
<li>
<a href=/2-1-3/>2.1.3</a>
</li>
<li>
<a href=/2-1-4/>2.1.4</a>
</li>
<li>
<a href=/2-1-5/>2.1.5</a>
</li>
<li>
<a href=/2-1-6/>2.1.6</a>
</li>
<li>
<a href=/2-1-7/>2.1.7</a>
</li>
<li>
<a href=/2-1-8/>2.1.8</a>
</li>
<li>
<a href=/2-1-9/>2.1.9</a>
</li>
<li>
<a href=/2-1-10/>2.1.10</a>
</li>
<li>
<a href=/2-1-11/>2.1.11</a>
</li>
<li>
<a href=/2-1-12/>2.1.12</a>
</li>
<li>
<a href=/2-1-13/>2.1.13</a>
</li>
<li>
<a href=/2-1-14/>2.1.14</a>
</li>
<li>
<a href=/2-1-15/>2.1.15</a>
</li>
<li>
<a href=/2-1-16/>2.1.16</a>
</li>
<li>
<a href=/2-1-17/>2.1.17</a>
</li>
<li>
<a href=/2-1-18/>2.1.18</a>
</li>
<li>
<a href=/2-1-19/>2.1.19</a>
</li>
<li>
<a href=/2-1-20/>2.1.20</a>
</li>
<li>
<a href=/2-1-21/>2.1.21</a>
</li>
<li>
<a href=/2-1-22/>2.1.22</a>
</li>
<li>
<a href=/2-1-23/>2.1.23</a>
</li>
<li>
<a href=/2-1-24/>2.1.24</a>
</li>
<li>
<a href=/2-1-25/>2.1.25</a>
</li>
<li>
<a href=/2-1-26/>2.1.26</a>
</li>
<li>
<a href=/2-1-27/>2.1.27</a>
</li>
<li>
<a href=/2-1-28/>2.1.28</a>
</li>
<li>
<a href=/2-1-29/>2.1.29</a>
</li>
<li>
<a href=/2-1-30/>2.1.30</a>
</li>
<li>
<a href=/2-1-31/>2.1.31</a>
</li>
<li>
<a href=/2-1-32/>2.1.32</a>
</li>
<li>
<a href=/2-1-33/>2.1.33</a>
</li>
<li>
<a href=/2-1-34/>2.1.34</a>
</li>
<li>
<a href=/2-1-35/>2.1.35</a>
</li>
<li>
<a href=/2-1-36/>2.1.36</a>
</li>
<li>
<a href=/2-1-37/>2.1.37</a>
</li>
<li>
<a href=/2-1-38/>2.1.38</a>
</li>
<li>
<a href=/2-2-1/>2.2.1</a>
</li>
<li>
<a href=/2-2-2/>2.2.2</a>
</li>
<li>
<a href=/2-2-3/>2.2.3</a>
</li>
<li>
<a href=/2-2-4/>2.2.4</a>
</li>
<li>
<a href=/2-2-5/>2.2.5</a>
</li>
<li>
<a href=/2-2-6/>2.2.6</a>
</li>
<li>
<a href=/2-2-7/>2.2.7</a>
</li>
<li>
<a href=/2-2-8/>2.2.8</a>
</li>
<li>
<a href=/2-2-9/>2.2.9</a>
</li>
<li>
<a href=/2-2-10/>2.2.10</a>
</li>
<li>
<a href=/2-2-11/>2.2.11</a>
</li>
<li>
<a href=/2-2-12/>2.2.12</a>
</li>
<li>
<a href=/2-2-13/>2.2.13</a>
</li>
<li>
<a href=/2-2-14/>2.2.14</a>
</li>
<li>
<a href=/2-2-15/>2.2.15</a>
</li>
<li>
<a href=/2-2-16/>2.2.16</a>
</li>
<li>
<a href=/2-2-17/>2.2.17</a>
</li>
<li>
<a href=/2-2-18/>2.2.18</a>
</li>
<li>
<a href=/2-2-19/>2.2.19</a>
</li>
<li>
<a href=/2-2-20/>2.2.20</a>
</li>
<li>
<a href=/2-2-21/>2.2.21</a>
</li>
<li>
<a href=/2-2-22/>2.2.22</a>
</li>
<li>
<a href=/2-2-23/>2.2.23</a>
</li>
<li>
<a href=/2-2-24/>2.2.24</a>
</li>
<li>
<a href=/2-2-25/>2.2.25</a>
</li>
<li>
<a href=/2-2-26/>2.2.26</a>
</li>
<li>
<a href=/2-2-27/>2.2.27</a>
</li>
<li>
<a href=/2-2-28/>2.2.28</a>
</li>
<li>
<a href=/2-2-29/>2.2.29</a>
</li>
<li>
<a href=/2-3-1/>2.3.1</a>
</li>
<li>
<a href=/2-3-2/>2.3.2</a>
</li>
<li>
<a href=/2-3-3/>2.3.3</a>
</li>
<li>
<a href=/2-3-4/>2.3.4</a>
</li>
<li>
<a href=/2-3-5/>2.3.5</a>
</li>
<li>
<a href=/2-3-6/>2.3.6</a>
</li>
<li>
<a href=/2-3-7/>2.3.7</a>
</li>
<li>
<a href=/2-3-8/>2.3.8</a>
</li>
<li>
<a href=/2-3-9/>2.3.9</a>
</li>
<li>
<a href=/2-3-10/>2.3.10</a>
</li>
<li>
<a href=/2-3-11/>2.3.11</a>
</li>
<li>
<a href=/2-3-12/>2.3.12</a>
</li>
<li>
<a href=/2-3-13/>2.3.13</a>
</li>
<li>
<a href=/2-3-14/>2.3.14</a>
</li>
<li>
<a href=/2-3-15/>2.3.15</a>
</li>
<li>
<a href=/2-3-16/>2.3.16</a>
</li>
<li>
<a href=/2-3-17/>2.3.17</a>
</li>
<li>
<a href=/2-3-18/>2.3.18</a>
</li>
<li>
<a href=/2-3-19/>2.3.19</a>
</li>
<li>
<a href=/2-3-20/>2.3.20</a>
</li>
<li>
<a href=/2-3-21/>2.3.21</a>
</li>
<li>
<a href=/2-3-22/>2.3.22</a>
</li>
<li>
<a href=/2-3-23/>2.3.23</a>
</li>
<li>
<a href=/2-3-24/>2.3.24</a>
</li>
<li>
<a href=/2-3-25/>2.3.25</a>
</li>
<li>
<a href=/2-3-26/>2.3.26</a>
</li>
<li>
<a href=/2-3-27/>2.3.27</a>
</li>
<li>
<a href=/2-3-28/>2.3.28</a>
</li>
<li>
<a href=/2-3-29/>2.3.29</a>
</li>
<li>
<a href=/2-3-30/>2.3.30</a>
</li>
<li>
<a href=/2-3-31/>2.3.31</a>
</li>
<li>
<a href=/2-4-1/>2.4.1</a>
</li>
<li>
<a href=/2-4-2/>2.4.2</a>
</li>
<li>
<a href=/2-4-3/>2.4.3</a>
</li>
<li>
<a href=/2-4-4/>2.4.4</a>
</li>
<li>
<a href=/2-4-5/>2.4.5</a>
</li>
<li>
<a href=/2-4-6/>2.4.6</a>
</li>
<li>
<a href=/2-4-7/>2.4.7</a>
</li>
<li>
<a href=/2-4-8/>2.4.8</a>
</li>
<li>
<a href=/2-4-9/>2.4.9</a>
</li>
<li>
<a href=/2-4-10/>2.4.10</a>
</li>
<li>
<a href=/2-4-11/>2.4.11</a>
</li>
<li>
<a href=/2-4-12/>2.4.12</a>
</li>
<li>
<a href=/2-4-13/>2.4.13</a>
</li>
<li>
<a href=/2-4-14/>2.4.14</a>
</li>
<li>
<a href=/2-4-15/>2.4.15</a>
</li>
<li>
<a href=/2-4-16/>2.4.16</a>
</li>
<li>
<a href=/2-4-17/>2.4.17</a>
</li>
<li>
<a href=/2-4-18/>2.4.18</a>
</li>
<li>
<a href=/2-4-19/>2.4.19</a>
</li>
<li>
<a href=/2-4-20/>2.4.20</a>
</li>
<li>
<a href=/2-4-21/>2.4.21</a>
</li>
<li>
<a href=/2-4-22/>2.4.22</a>
</li>
<li>
<a href=/2-4-23/>2.4.23</a>
</li>
<li>
<a href=/2-4-24/>2.4.24</a>
</li>
<li>
<a href=/2-4-25/>2.4.25</a>
</li>
<li>
<a href=/2-4-26/>2.4.26</a>
</li>
<li>
<a href=/2-4-27/>2.4.27</a>
</li>
<li>
<a href=/2-4-28/>2.4.28</a>
</li>
<li>
<a href=/2-4-29/>2.4.29</a>
</li>
<li>
<a href=/2-4-30/>2.4.30</a>
</li>
<li>
<a href=/2-4-31/>2.4.31</a>
</li>
<li>
<a href=/2-4-32/>2.4.32</a>
</li>
<li>
<a href=/2-4-33/ class=active>2.4.33</a>
</li>
<li>
<a href=/2-4-34/>2.4.34</a>
</li>
<li>
<a href=/2-4-35/>2.4.35</a>
</li>
<li>
<a href=/2-4-36/>2.4.36</a>
</li>
<li>
<a href=/2-4-37/>2.4.37</a>
</li>
<li>
<a href=/2-4-38/>2.4.38</a>
</li>
<li>
<a href=/2-4-39/>2.4.39</a>
</li>
<li>
<a href=/2-4-40/>2.4.40</a>
</li>
<li>
<a href=/2-4-41/>2.4.41</a>
</li>
<li>
<a href=/2-4-42/>2.4.42</a>
</li>
<li>
<a href=/2-5-1/>2.5.1</a>
</li>
<li>
<a href=/2-5-2/>2.5.2</a>
</li>
<li>
<a href=/2-5-3/>2.5.3</a>
</li>
<li>
<a href=/2-5-4/>2.5.4</a>
</li>
<li>
<a href=/2-5-5/>2.5.5</a>
</li>
<li>
<a href=/2-5-6/>2.5.6</a>
</li>
<li>
<a href=/2-5-7/>2.5.7</a>
</li>
<li>
<a href=/2-5-8/>2.5.8</a>
</li>
<li>
<a href=/2-5-9/>2.5.9</a>
</li>
<li>
<a href=/2-5-10/>2.5.10</a>
</li>
<li>
<a href=/2-5-11/>2.5.11</a>
</li>
<li>
<a href=/2-5-12/>2.5.12</a>
</li>
<li>
<a href=/2-5-13/>2.5.13</a>
</li>
<li>
<a href=/2-5-14/>2.5.14</a>
</li>
<li>
<a href=/2-5-15/>2.5.15</a>
</li>
<li>
<a href=/2-5-16/>2.5.16</a>
</li>
<li>
<a href=/2-5-17/>2.5.17</a>
</li>
<li>
<a href=/2-5-18/>2.5.18</a>
</li>
<li>
<a href=/2-5-19/>2.5.19</a>
</li>
<li>
<a href=/2-5-20/>2.5.20</a>
</li>
<li>
<a href=/2-5-21/>2.5.21</a>
</li>
<li>
<a href=/2-5-22/>2.5.22</a>
</li>
<li>
<a href=/2-5-23/>2.5.23</a>
</li>
<li>
<a href=/2-5-24/>2.5.24</a>
</li>
<li>
<a href=/2-5-25/>2.5.25</a>
</li>
<li>
<a href=/2-5-26/>2.5.26</a>
</li>
<li>
<a href=/2-5-27/>2.5.27</a>
</li>
<li>
<a href=/2-5-28/>2.5.28</a>
</li>
<li>
<a href=/2-5-29/>2.5.29</a>
</li>
<li>
<a href=/2-5-30/>2.5.30</a>
</li>
<li>
<a href=/2-5-31/>2.5.31</a>
</li>
<li>
<a href=/2-5-32/>2.5.32</a>
</li>
<li>
<a href=/2-5-33/>2.5.33</a>
</li>
<li>
<a href=/3-1-1/>3.1.1</a>
</li>
<li>
<a href=/3-1-2/>3.1.2</a>
</li>
<li>
<a href=/3-1-3/>3.1.3</a>
</li>
<li>
<a href=/3-1-4/>3.1.4</a>
</li>
<li>
<a href=/3-1-5/>3.1.5</a>
</li>
<li>
<a href=/3-1-6/>3.1.6</a>
</li>
<li>
<a href=/3-1-7/>3.1.7</a>
</li>
<li>
<a href=/3-1-8/>3.1.8</a>
</li>
<li>
<a href=/3-1-9/>3.1.9</a>
</li>
<li>
<a href=/3-1-10/>3.1.10</a>
</li>
<li>
<a href=/3-1-11/>3.1.11</a>
</li>
<li>
<a href=/3-1-12/>3.1.12</a>
</li>
<li>
<a href=/3-1-13/>3.1.13</a>
</li>
<li>
<a href=/3-1-14/>3.1.14</a>
</li>
<li>
<a href=/3-1-15/>3.1.15</a>
</li>
<li>
<a href=/3-1-16/>3.1.16</a>
</li>
<li>
<a href=/3-1-17/>3.1.17</a>
</li>
<li>
<a href=/3-1-18/>3.1.18</a>
</li>
<li>
<a href=/3-1-19/>3.1.19</a>
</li>
<li>
<a href=/3-1-20/>3.1.20</a>
</li>
<li>
<a href=/3-1-21/>3.1.21</a>
</li>
<li>
<a href=/3-1-22/>3.1.22</a>
</li>
<li>
<a href=/3-1-23/>3.1.23</a>
</li>
<li>
<a href=/3-1-24/>3.1.24</a>
</li>
<li>
<a href=/3-1-25/>3.1.25</a>
</li>
<li>
<a href=/3-1-26/>3.1.26</a>
</li>
<li>
<a href=/3-1-27/>3.1.27</a>
</li>
<li>
<a href=/3-1-28/>3.1.28</a>
</li>
<li>
<a href=/3-1-29/>3.1.29</a>
</li>
<li>
<a href=/3-1-30/>3.1.30</a>
</li>
<li>
<a href=/3-1-31/>3.1.31</a>
</li>
<li>
<a href=/3-1-32/>3.1.32</a>
</li>
<li>
<a href=/3-1-33/>3.1.33</a>
</li>
<li>
<a href=/3-1-34/>3.1.34</a>
</li>
<li>
<a href=/3-1-35/>3.1.35</a>
</li>
<li>
<a href=/3-1-36/>3.1.36</a>
</li>
<li>
<a href=/3-1-37/>3.1.37</a>
</li>
<li>
<a href=/3-1-38/>3.1.38</a>
</li>
<li>
<a href=/3-1-39/>3.1.39</a>
</li>
<li>
<a href=/3-1-40/>3.1.40</a>
</li>
<li>
<a href=/3-1-41/>3.1.41</a>
</li>
<li>
<a href=/3-2-1/>3.2.1</a>
</li>
<li>
<a href=/3-2-2/>3.2.2</a>
</li>
<li>
<a href=/3-2-3/>3.2.3</a>
</li>
<li>
<a href=/3-2-4/>3.2.4</a>
</li>
<li>
<a href=/3-2-5/>3.2.5</a>
</li>
<li>
<a href=/3-2-6/>3.2.6</a>
</li>
<li>
<a href=/3-2-7/>3.2.7</a>
</li>
<li>
<a href=/3-2-8/>3.2.8</a>
</li>
<li>
<a href=/3-2-9/>3.2.9</a>
</li>
<li>
<a href=/3-2-10/>3.2.10</a>
</li>
<li>
<a href=/3-2-11/>3.2.11</a>
</li>
<li>
<a href=/3-2-12/>3.2.12</a>
</li>
<li>
<a href=/3-2-13/>3.2.13</a>
</li>
<li>
<a href=/3-2-14/>3.2.14</a>
</li>
<li>
<a href=/3-2-15/>3.2.15</a>
</li>
<li>
<a href=/3-2-16/>3.2.16</a>
</li>
<li>
<a href=/3-2-17/>3.2.17</a>
</li>
<li>
<a href=/3-2-18/>3.2.18</a>
</li>
<li>
<a href=/3-2-19/>3.2.19</a>
</li>
<li>
<a href=/3-2-20/>3.2.20</a>
</li>
<li>
<a href=/3-2-21/>3.2.21</a>
</li>
<li>
<a href=/3-2-22/>3.2.22</a>
</li>
<li>
<a href=/3-2-23/>3.2.23</a>
</li>
<li>
<a href=/3-2-24/>3.2.24</a>
</li>
<li>
<a href=/3-2-25/>3.2.25</a>
</li>
<li>
<a href=/3-2-26/>3.2.26</a>
</li>
<li>
<a href=/3-2-27/>3.2.27</a>
</li>
<li>
<a href=/3-2-28/>3.2.28</a>
</li>
<li>
<a href=/3-2-29/>3.2.29</a>
</li>
<li>
<a href=/3-2-30/>3.2.30</a>
</li>
<li>
<a href=/3-2-31/>3.2.31</a>
</li>
<li>
<a href=/3-2-32/>3.2.32</a>
</li>
<li>
<a href=/3-2-33/>3.2.33</a>
</li>
<li>
<a href=/3-2-34/>3.2.34</a>
</li>
<li>
<a href=/3-2-35/>3.2.35</a>
</li>
<li>
<a href=/3-2-36/>3.2.36</a>
</li>
<li>
<a href=/3-2-37/>3.2.37</a>
</li>
<li>
<a href=/3-2-38/>3.2.38</a>
</li>
<li>
<a href=/3-2-39/>3.2.39</a>
</li>
<li>
<a href=/3-2-40/>3.2.40</a>
</li>
<li>
<a href=/3-2-41/>3.2.41</a>
</li>
<li>
<a href=/3-2-42/>3.2.42</a>
</li>
<li>
<a href=/3-2-43/>3.2.43</a>
</li>
<li>
<a href=/3-2-44/>3.2.44</a>
</li>
<li>
<a href=/3-2-45/>3.2.45</a>
</li>
<li>
<a href=/3-2-46/>3.2.46</a>
</li>
<li>
<a href=/3-2-47/>3.2.47</a>
</li>
<li>
<a href=/3-3-1/>3.3.1</a>
</li>
<li>
<a href=/3-3-2/>3.3.2</a>
</li>
<li>
<a href=/3-3-3/>3.3.3</a>
</li>
<li>
<a href=/3-3-4/>3.3.4</a>
</li>
<li>
<a href=/3-3-5/>3.3.5</a>
</li>
<li>
<a href=/run-solution-code/>如何：运行题解代码</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>2.4.33</strong>
<label for=toc-control>
</label>
</div>
</header>
<article class=markdown><h1 id=2433>
2.4.33
<a class=anchor href=#2433>#</a>
</h1>
<h2 id=解答>
解答
<a class=anchor href=#%e8%a7%a3%e7%ad%94>#</a>
</h2>
<p>官方实现见：https://algs4.cs.princeton.edu/24pq/IndexMaxPQ.java.html</p>
<p>书中算法 2.6 给出的是一个最大堆的实现，但本题给出的部分解答却是最小堆的。<br>
同时官网给出的解答是最大堆的，这里选择和官网保持一致，给出最大堆的实现。</p>
<p>初看起来可能会比较难理解，但其实就是以指针为元素的堆。<br>
堆中存放的只是指向元素的指针（如果元素在数组里那就变成了下标）。<br>
做比较的时候要先根据指针（下标）找到对应元素，再进行比较。</p>
<p>再来看题目中给出的要求，<code>keys[]</code> 数组中用于保存元素（比如 <code>keys[0] = ‘A’;</code>），<br>
而 <code>pq[]</code> 中保存的是元素在 <code>key[]</code> 数组中的下标（比如 <code>pq[1] = 0;</code>)，<br>
而 <code>qp[]</code> 中保存的是某个下标在 <code>pq[]</code>中 的对应位置。（比如 <code>qp[0] = 1</code>）。<br>
在这三个数组中，<code>pq[]</code>是一个堆，我们的堆操作都作用在这个数组上。<br>
<code>keys[]</code> 数组中的元素不随着 <code>pq[]</code> 中下标的移动而移动，只有当删除或添加元素时才发生变化。<br>
<code>qp[]</code>与<code>pq[]</code>中的索引一一对应，<code>pq[]</code>交换时也需要交换<code>qp[]</code>中的对应元素。</p>
<h2 id=代码>
代码
<a class=anchor href=#%e4%bb%a3%e7%a0%81>#</a>
</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>using</span> System;
<span style=color:#66d9ef>using</span> System.Collections;
<span style=color:#66d9ef>using</span> System.Collections.Generic;

<span style=color:#66d9ef>namespace</span> PriorityQueue
{
    <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>    <span style=color:#75715e>/// 索引优先队列。
</span><span style=color:#75715e></span>    <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>    <span style=color:#75715e>/// &lt;typeparam name=&#34;Key&#34;&gt;优先队列中包含的元素。&lt;/typeparam&gt;
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IndexMaxPQ</span>&lt;Key&gt; : IEnumerable&lt;<span style=color:#66d9ef>int</span>&gt; <span style=color:#66d9ef>where</span> Key : IComparable&lt;Key&gt;
    {
        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 优先队列中的元素。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> n;
        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 索引最大堆。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span>[] pq;
        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// pq 的逆索引，pq[qp[i]]=qp[pq[i]]=i
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span>[] qp;
        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 实际元素。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> Key[] keys;

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 建立指定大小的面向索引的最大堆。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;capacity&#34;&gt;&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> IndexMaxPQ(<span style=color:#66d9ef>int</span> capacity)
        {
            <span style=color:#66d9ef>if</span> (capacity &lt; <span style=color:#ae81ff>0</span>)
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentOutOfRangeException();
            <span style=color:#66d9ef>this</span>.n = <span style=color:#ae81ff>0</span>;
            <span style=color:#66d9ef>this</span>.keys = <span style=color:#66d9ef>new</span> Key[capacity + <span style=color:#ae81ff>1</span>];
            <span style=color:#66d9ef>this</span>.pq = <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span>[capacity + <span style=color:#ae81ff>1</span>];
            <span style=color:#66d9ef>this</span>.qp = <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>int</span>[capacity + <span style=color:#ae81ff>1</span>];
            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i = <span style=color:#ae81ff>0</span>; i &lt;= capacity; i++)
                <span style=color:#66d9ef>this</span>.qp[i] = -<span style=color:#ae81ff>1</span>;
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 将与索引 &lt;paramref name=&#34;i&#34;/&gt; 相关联的元素换成 &lt;paramref name=&#34;k&#34;/&gt;。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;要修改关联元素的索引。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;k&#34;&gt;用于替换的新元素。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> ChangeKey(<span style=color:#66d9ef>int</span> i, Key k)
        {
            <span style=color:#66d9ef>if</span> (!Contains(i))
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentNullException(<span style=color:#e6db74>&#34;队列中没有该索引&#34;</span>);
            <span style=color:#66d9ef>this</span>.keys[i] = k;
            Swim(<span style=color:#66d9ef>this</span>.qp[i]);
            Sink(<span style=color:#66d9ef>this</span>.qp[i]);
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 确认堆包含某个索引 &lt;paramref name=&#34;i&#34;/&gt;。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;要查询的索引。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>bool</span> Contains(<span style=color:#66d9ef>int</span> i) =&gt; <span style=color:#66d9ef>this</span>.qp[i] != -<span style=color:#ae81ff>1</span>;

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 删除索引 &lt;paramref name=&#34;i&#34;/&gt; 对应的键值。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;要清空的索引。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Delete(<span style=color:#66d9ef>int</span> i)
        {
            <span style=color:#66d9ef>if</span> (!Contains(i))
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentOutOfRangeException(<span style=color:#e6db74>&#34;index is not in the priority queue&#34;</span>);
            <span style=color:#66d9ef>int</span> index = <span style=color:#66d9ef>this</span>.qp[i];
            Exch(index, <span style=color:#66d9ef>this</span>.n--);
            Swim(index);
            Sink(index);
            <span style=color:#66d9ef>this</span>.keys[i] = <span style=color:#66d9ef>default</span>(Key);
            <span style=color:#66d9ef>this</span>.qp[i] = -<span style=color:#ae81ff>1</span>;
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 删除并获得最大元素所在的索引。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> DelMax()
        {
            <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.n == <span style=color:#ae81ff>0</span>)
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentOutOfRangeException(<span style=color:#e6db74>&#34;Priority Queue Underflow&#34;</span>);
            <span style=color:#66d9ef>int</span> max = <span style=color:#66d9ef>this</span>.pq[<span style=color:#ae81ff>1</span>];
            Exch(<span style=color:#ae81ff>1</span>, <span style=color:#66d9ef>this</span>.n--);
            Sink(<span style=color:#ae81ff>1</span>);

            <span style=color:#66d9ef>this</span>.qp[max] = -<span style=color:#ae81ff>1</span>;
            <span style=color:#66d9ef>this</span>.keys[max] = <span style=color:#66d9ef>default</span>(Key);
            <span style=color:#66d9ef>this</span>.pq[<span style=color:#66d9ef>this</span>.n + <span style=color:#ae81ff>1</span>] = -<span style=color:#ae81ff>1</span>;
            <span style=color:#66d9ef>return</span> max;
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 将索引 &lt;paramref name=&#34;i&#34;/&gt; 对应的键值减少为 &lt;paramref name=&#34;key&#34;/&gt;。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;要修改的索引。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;key&#34;&gt;减少后的键值。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> DecreaseKey(<span style=color:#66d9ef>int</span> i, Key key)
        {
            <span style=color:#66d9ef>if</span> (!Contains(i))
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentOutOfRangeException(<span style=color:#e6db74>&#34;index is not in the priority queue&#34;</span>);
            <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.keys[i].CompareTo(key) &lt;= <span style=color:#ae81ff>0</span>)
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentException(<span style=color:#e6db74>&#34;Calling IncreaseKey() with given argument would not strictly increase the Key&#34;</span>);

            <span style=color:#66d9ef>this</span>.keys[i] = key;
            Sink(<span style=color:#66d9ef>this</span>.qp[i]);
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 将索引 &lt;paramref name=&#34;i&#34;/&gt; 对应的键值增加为 &lt;paramref name=&#34;key&#34;/&gt;。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;要修改的索引。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;key&#34;&gt;增加后的键值。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> IncreaseKey(<span style=color:#66d9ef>int</span> i, Key key)
        {
            <span style=color:#66d9ef>if</span> (!Contains(i))
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentOutOfRangeException(<span style=color:#e6db74>&#34;index is not in the priority queue&#34;</span>);
            <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.keys[i].CompareTo(key) &gt;= <span style=color:#ae81ff>0</span>)
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentException(<span style=color:#e6db74>&#34;Calling IncreaseKey() with given argument would not strictly increase the Key&#34;</span>);

            <span style=color:#66d9ef>this</span>.keys[i] = key;
            Swim(<span style=color:#66d9ef>this</span>.qp[i]);
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 将元素 &lt;paramref name=&#34;v&#34;/&gt; 与索引 &lt;paramref name=&#34;i&#34;/&gt; 关联。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;v&#34;&gt;待插入元素。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;需要关联的索引。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> Insert(Key v, <span style=color:#66d9ef>int</span> i)
        {
            <span style=color:#66d9ef>if</span> (Contains(i))
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentException(<span style=color:#e6db74>&#34;索引已存在&#34;</span>);
            <span style=color:#66d9ef>this</span>.n++;
            <span style=color:#66d9ef>this</span>.qp[i] = <span style=color:#66d9ef>this</span>.n;
            <span style=color:#66d9ef>this</span>.pq[<span style=color:#66d9ef>this</span>.n] = i;
            <span style=color:#66d9ef>this</span>.keys[i] = v;
            Swim(<span style=color:#66d9ef>this</span>.n);
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 堆是否为空。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>bool</span> IsEmpty() =&gt; <span style=color:#66d9ef>this</span>.n == <span style=color:#ae81ff>0</span>;

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 获得与索引 &lt;paramref name=&#34;i&#34;/&gt; 关联的元素。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;索引。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> Key KeyOf(<span style=color:#66d9ef>int</span> i)
        {
            <span style=color:#66d9ef>if</span> (!Contains(i))
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentNullException(<span style=color:#e6db74>&#34;队列中没有该索引&#34;</span>);
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.keys[i];
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 返回最大元素对应的索引。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> MaxIndex()
        {
            <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.n == <span style=color:#ae81ff>0</span>)
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentOutOfRangeException(<span style=color:#e6db74>&#34;Priority Queue Underflow&#34;</span>);
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.pq[<span style=color:#ae81ff>1</span>];
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 获得最大元素。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> Key MaxKey()
        {
            <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.n == <span style=color:#ae81ff>0</span>)
                <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> ArgumentOutOfRangeException(<span style=color:#e6db74>&#34;Priority Queue Underflow&#34;</span>);
            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.keys[<span style=color:#66d9ef>this</span>.pq[<span style=color:#ae81ff>1</span>]];
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 返回堆的元素数量。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> Size() =&gt; <span style=color:#66d9ef>this</span>.n;

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 比较第一个元素是否小于第二个元素。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;第一个元素。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;j&#34;&gt;第二个元素。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>bool</span> Less(<span style=color:#66d9ef>int</span> i, <span style=color:#66d9ef>int</span> j) 
            =&gt; <span style=color:#66d9ef>this</span>.keys[<span style=color:#66d9ef>this</span>.pq[i]].CompareTo(<span style=color:#66d9ef>this</span>.keys[<span style=color:#66d9ef>this</span>.pq[j]]) &lt; <span style=color:#ae81ff>0</span>;

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 交换两个元素。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;i&#34;&gt;要交换的元素下标。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;j&#34;&gt;要交换的元素下标。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> Exch(<span style=color:#66d9ef>int</span> i, <span style=color:#66d9ef>int</span> j)
        {
            <span style=color:#66d9ef>int</span> swap = <span style=color:#66d9ef>this</span>.pq[i];
            <span style=color:#66d9ef>this</span>.pq[i] = <span style=color:#66d9ef>this</span>.pq[j];
            <span style=color:#66d9ef>this</span>.pq[j] = swap;
            <span style=color:#66d9ef>this</span>.qp[<span style=color:#66d9ef>this</span>.pq[i]] = i;
            <span style=color:#66d9ef>this</span>.qp[<span style=color:#66d9ef>this</span>.pq[j]] = j;
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 使下标为 &lt;paramref name=&#34;k&#34;/&gt; 的元素上浮。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;k&#34;&gt;上浮元素下标。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> Swim(<span style=color:#66d9ef>int</span> k)
        {
            <span style=color:#66d9ef>while</span> (k &gt; <span style=color:#ae81ff>1</span> &amp;&amp; Less(k / <span style=color:#ae81ff>2</span>, k))
            {
                Exch(k / <span style=color:#ae81ff>2</span>, k);
                k /= <span style=color:#ae81ff>2</span>;
            }
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 使下标为 &lt;paramref name=&#34;k&#34;/&gt; 元素下沉。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;param name=&#34;k&#34;&gt;需要下沉的元素。&lt;/param&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> Sink(<span style=color:#66d9ef>int</span> k)
        {
            <span style=color:#66d9ef>while</span> (k * <span style=color:#ae81ff>2</span> &lt;= <span style=color:#66d9ef>this</span>.n)
            {
                <span style=color:#66d9ef>int</span> j = <span style=color:#ae81ff>2</span> * k;
                <span style=color:#66d9ef>if</span> (j &lt; <span style=color:#66d9ef>this</span>.n &amp;&amp; Less(j, j + <span style=color:#ae81ff>1</span>))
                    j++;
                <span style=color:#66d9ef>if</span> (!Less(k, j))
                    <span style=color:#66d9ef>break</span>;
                Exch(k, j);
                k = j;
            }
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 获取迭代器。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        <span style=color:#66d9ef>public</span> IEnumerator&lt;<span style=color:#66d9ef>int</span>&gt; GetEnumerator()
        {
            IndexMaxPQ&lt;Key&gt; copy = <span style=color:#66d9ef>new</span> IndexMaxPQ&lt;Key&gt;(<span style=color:#66d9ef>this</span>.n);
            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i = <span style=color:#ae81ff>0</span>; i &lt; <span style=color:#66d9ef>this</span>.n; i++)
                copy.Insert(<span style=color:#66d9ef>this</span>.keys[<span style=color:#66d9ef>this</span>.pq[i]], <span style=color:#66d9ef>this</span>.pq[i]);

            <span style=color:#66d9ef>while</span> (!copy.IsEmpty())
                <span style=color:#66d9ef>yield</span> <span style=color:#66d9ef>return</span> copy.DelMax();
        }

        <span style=color:#75715e>/// &lt;summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// 获取迭代器。
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;/summary&gt;
</span><span style=color:#75715e></span>        <span style=color:#75715e>/// &lt;returns&gt;&lt;/returns&gt;
</span><span style=color:#75715e></span>        IEnumerator IEnumerable.GetEnumerator() =&gt; GetEnumerator();
    }
}
</code></pre></div><h2 id=另请参阅>
另请参阅
<a class=anchor href=#%e5%8f%a6%e8%af%b7%e5%8f%82%e9%98%85>#</a>
</h2>
<p><a href=https://github.com/ikesnowy/Algorithms-4th-Edition-in-Csharp/tree/master/2%20Sorting/2.4/PriorityQueue>PriorityQueue 库</a></p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
<div><a class="flex align-center" href=https://github.com/ikesnowy/Algorithms-4th-Edition-in-Csharp/commit/3cf95d07d6d2cd39c1889c1973632d76528ed82f title="最后修改者 沈星繁 | 2022-2-22" target=_blank rel=noopener>
<img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>2022-2-22</span>
</a>
</div>
<div>
<a class="flex align-center" href=https://github.com/ikesnowy/Algorithms-4th-Edition-in-Csharp/edit/master/docs/content/2-4-33.md target=_blank rel=noopener>
<img src=/svg/edit.svg class=book-icon alt=Edit>
<span>编辑本页</span>
</a>
</div>
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
</main>
</body>
</html>